# Documentation

Welcome to the Walbucket SDK documentation. Get started with decentralized media storage on Sui blockchain.

## Quick Links

### Getting Started

- [Installation](/docs/installation) - Install the SDK
- [Quick Start](/docs/quick-start) - Get up and running in minutes
- [Configuration](/docs/configuration) - Configure the SDK

### API Reference

#### Core Operations

- [Upload](/docs/api/upload) - Upload files to storage
- [Retrieve](/docs/api/retrieve) - Retrieve files from storage
- [Delete](/docs/api/delete) - Delete files
- [Get Asset](/docs/api/get-asset) - Get asset metadata
- [List](/docs/api/list) - List all assets

#### File Operations

- [Rename](/docs/api/rename) - Rename assets
- [Copy](/docs/api/copy) - Duplicate assets

#### Folder Management

- [Create Folder](/docs/api/create-folder) - Create folders
- [Delete Folder](/docs/api/delete-folder) - Delete folders
- [Move to Folder](/docs/api/move-to-folder) - Organize assets in folders

#### Sharing & Permissions

##### Access Grants (Private Sharing)
- [Share Asset](/docs/api/share-asset) - Grant access to specific users
- [Revoke Share](/docs/api/revoke-share) - Revoke user access
- [List Access Grants](/docs/api/list-access-grants) - View all access grants
- [Get Access Grant](/docs/api/get-access-grant) - Get grant details

##### Shareable Links (Public Sharing)
- [Create Shareable Link](/docs/api/create-shareable-link) - Create public share links
- [Deactivate Shareable Link](/docs/api/deactivate-shareable-link) - Disable public links
- [Track Link Access](/docs/api/track-link-access) - Monitor link usage
- [List Shareable Links](/docs/api/list-shareable-links) - View all shareable links
- [Get Shareable Link](/docs/api/get-shareable-link) - Get link details

### Advanced Topics

- [Gas Strategies](/docs/advanced/gas-strategies) - Choose who pays gas fees
- [Encryption Policies](/docs/advanced/encryption-policies) - Secure your files
- [Error Handling](/docs/advanced/error-handling) - Handle errors gracefully
- [Wallet Integration](/docs/advanced/wallet-integration) - Integrate with wallets

## About Walbucket

Walbucket SDK provides a simple, developer-friendly interface for storing and managing media files on the Sui blockchain using Walrus decentralized storage. With built-in encryption support via Seal, automatic URL generation, and flexible gas payment strategies, it's designed to make decentralized storage as easy as using traditional cloud storage services.

## Features

- âœ… **Standalone SDK** - No backend dependency
- âœ… **Direct Sui Integration** - Uses Sui gRPC and JSON-RPC clients
- âœ… **Walrus Storage** - Direct blob storage integration
- âœ… **Seal Encryption** - Optional client-side encryption
- âœ… **API Key Authentication** - On-chain API key validation
- âœ… **Gas Strategies** - Developer-sponsored or user-pays
- âœ… **Type-Safe** - Full TypeScript support
- âœ… **Cloudinary-like API** - Familiar developer experience
- âœ… **Automatic URL Generation** - File URLs automatically generated and returned
- âœ… **Network Auto-Detection** - Package IDs automatically selected based on network
- âœ… **Sharing & Permissions** - Granular access control for assets
- âœ… **Folder Organization** - Organize assets in folders
- âœ… **Public Links** - Create shareable links with optional expiration

## Latest Updates (v0.5.5)

### Sharing Features
- Enhanced sharing with granular permissions (read, write, admin)
- Password-protected shares
- Time-based expiration for shares and links
- Access grant management
- Shareable link management with access tracking
- Deactivate shareable links
- List and query all shares and links

### Developer Features
- Project-based API key organization
- API key permission management
- Rate limiting support
- API key expiration
- Enhanced analytics and usage tracking

## NPM Package

ðŸ“¦ **Package**: [@walbucket/sdk](https://www.npmjs.com/package/@walbucket/sdk)

**Current Version**: 0.5.5

## Quick Example

```typescript
import { Walbucket } from '@walbucket/sdk';

// Initialize
const walbucket = new Walbucket({
  apiKey: 'your-api-key',
  network: 'testnet',
  sponsorPrivateKey: 'your-private-key',
});

// Upload a file
const { assetId, url } = await walbucket.upload(file, {
  name: 'photo.jpg',
  folder: 'gallery'
});

// Share with specific user
await walbucket.shareAsset(assetId, recipientAddress, {
  canRead: true,
  expiresAt: Date.now() + (7 * 24 * 60 * 60 * 1000) // 7 days
});

// Create public link
const shareToken = crypto.randomUUID();
await walbucket.createShareableLink(assetId, {
  shareToken,
  canRead: true,
  expiresAt: Date.now() + (24 * 60 * 60 * 1000) // 24 hours
});
const shareUrl = `https://yourapp.com/share/${shareToken}`;

// Retrieve file
const { data, metadata } = await walbucket.retrieve(assetId);
```

## Sharing Workflows

### Private Sharing (Access Grants)

For sharing with specific wallet addresses:

1. Create grant with `shareAsset()`
2. Set permissions (read/write/admin)
3. Optional: Set expiration and password
4. Monitor with `listAccessGrants()`
5. Revoke with `revokeShare()` when needed

### Public Sharing (Shareable Links)

For creating public share links:

1. Generate unique token with `crypto.randomUUID()`
2. Create link with `createShareableLink()`
3. Share the URL containing the token
4. Track access with `trackLinkAccess()`
5. Monitor with `listShareableLinks()`
6. Deactivate with `deactivateShareableLink()` when needed

## Common Patterns

### Full Access Management

```typescript
// 1. Upload file
const { assetId } = await walbucket.upload(file);

// 2. Share with team member
await walbucket.shareAsset(assetId, teamMemberAddress, {
  canRead: true,
  canWrite: true
});

// 3. Create public link
const token = crypto.randomUUID();
await walbucket.createShareableLink(assetId, {
  shareToken: token,
  canRead: true,
  expiresAt: Date.now() + (7 * 24 * 60 * 60 * 1000)
});

// 4. Monitor all access
const grants = await walbucket.listAccessGrants();
const links = await walbucket.listShareableLinks();

console.log(`Shared with ${grants.length} users`);
console.log(`${links.length} public links created`);
```

## Support

For issues, questions, or contributions, visit the [GitHub repository](https://github.com/yourusername/walbucket).
